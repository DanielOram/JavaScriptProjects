<!doctype html>
<html>
  <head>
	  <meta name="viewport" content="width=device-width, initial-scale=1">
	  
	  <!-- Latest compiled and minified CSS -->
	  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
	  
	  <!-- JQuery -->
	  <!--<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>-->
	  <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
	  
	  <!-- Latest compiled and minified JavaScript -->
	  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	  
	  <!-- load socket.io client to expose global io object and then connect.
	  	 send form data on submit-->
		  
		  
		  <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
		  
		  



	  
	  <title>Socket.IO chat</title>


  </head>
  <body>

  <script>
	  $(document).ready(function () {

		  //string formatting function
		  String.prototype.format = String.prototype.f = function() {
			  var s = this,
					  i = arguments.length;

			  while (i--) {
				  s = s.replace(new RegExp('\\{' + i + '\\}', 'gm'), arguments[i]);
			  }
			  return s;
		  };


		  var username = 'Joe Bloggs';
		  var socket = io();
		  username = prompt("Enter a username", "Joe Bloggs");
		  $('#username-span').text(username);
		  $('form').submit(function () {
			  if ( $.trim( $('#m').val() ) != '' ){
				  socket.emit('chat message', {message: $('#m').val(), name: username });
			  }
			  $('#m').val('');
			  return false;
		  });
		  <!--add messages to page -->
		  socket.on('chat message',  function (data) {
			  if(data['name'] == username) {
				  $('#messages').append($('<li class="list-group-item" style="background: #c3c3c3; color: #000000;">').text("{0}: {1}".f(data['name'], data['message'])));
			  } else {
				  $('#messages').append($('<li class="list-group-item not-my-message">').text("{0}: {1}".f(data['name'], data['message'])));
			  }
		  });
	  });

  </script><!-- socket.io client side processor -->

	  <!--
    <ul id="messages"></ul>
    <form action="">
      <input id="m" autocomplete="off" /><button>Send</button>
    </form>
	-->
	<div class="container-full">
		<div class="row">

			<div class="col-lg-12 text-center v-center">

				<h1>Daniel Oram's Chat App</h1>
				<p class="lead">A Nodejs application that uses Socket.io for realtime chat!</p>

				<br>

				<form class="col-md-12">

					<div class="input-group input-group-lg">
						<span class="input-group-addon" id="sizing-addon1"><span class="glyphicon glyphicon-comment" aria-hidden="true"></span></span>
						<span class="input-group-addon" id="sizing-addon2"><span id="username-span"></span></span>
						<input id="m" autocomplete="off" type="text" class="form-control input-lg" placeholder="Type a message here..." aria-describedby="sizing-addon1">
						<span class="input-group-btn"><button class="btn btn-lg btn-primary" type="button">Enter</button></span>
					</div>
				</form>

			</div>

		</div> <!-- /row -->
	</div> <!-- /container full -->

	<div class="container">

		<hr>
		<div class="row">
			<div class="col-md-12">
				<div class="panel panel-default">
					<div class="panel-heading"><span>Conversation</span>
					</div>
					<div class="panel-body">
						<ul id="messages" class="list-group"></ul>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="container">

		<hr>

	</div>

	<div id="footer">
		<div class="container">
			<div class="row">
				<div class="col-lg-12">
					<br><br>
					<p> &nbsp; Â©Copyright 2015 Daniel Oram</p>
					<br><br>
				</div>
			</div>
		</div>
	</div>
	
  </body>
</html>